{function isAbbr(e){return"ABBR"===e.tagName&&e.hasAttribute("title")}function getTitle(e){return isAbbr(e.selection.getNode())?e.selection.getNode().title:""}function getContent(e){return isAbbr(e.selection.getNode())?e.selection.getNode().innerHTML:e.selection.getContent()}function setContentEditable(e){return t=>{t.forEach(t=>{isAbbr(t)||t.attr("contenteditable",e)})}}function insertAbbr(e,t,n){const b=e.selection.getNode();isAbbr(b)?""===t||""===n?removeAbbr(e,n):(b.removeAttribute("title"),b.title=t,b.innerHTML=n):(e.focus(),e.execCommand("mceInsertContent",!1,e.dom.createHTML("abbr",{title:t},n)),e.selection.collapse(!0)),e.undoManager.add()}function removeAbbr(e,t=null){isAbbr(e.selection.getNode())&&(e.selection.setContent(null===t?getContent():t),e.undoManager.add(),e.selection.collapse(!0))}tinymce.PluginManager.requireLangPack("abbr","en_US,en_GB,fr_FR"),tinymce.PluginManager.add("abbr",function(e){return e.on("PreInit",()=>{e.parser.addNodeFilter("abbr",setContentEditable("false")),e.serializer.addNodeFilter("abbr",setContentEditable(null))}),e.addCommand("mceAbbr",()=>{const t=isAbbr(e.selection.getNode());e.windowManager.open({title:"mceAbbr_title",body:[{type:"textbox",name:"content",size:40,label:"mceAbbr_contentLabel",value:getContent(e)},{type:"textbox",name:"title",size:40,label:"mceAbbr_titleLabel",value:getTitle(e)},{type:"button",name:"delete",label:" ",text:"mceAbbr_deleteBtnText",hidden:!t,onclick:()=>{removeAbbr(e),e.windowManager.close()}}],onsubmit:t=>insertAbbr(e,t.data.title,t.data.content)})}),e.addButton("abbr",{icon:"bubble",tooltip:"mceAbbr_tooltip",cmd:"mceAbbr",stateSelector:"abbr:not([title])"}),{getMetadata:()=>({name:"Abbr Plugin",url:"https://www.github.com/jeffdess/tinymce-plugin-abbr"})}})}